<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List & Planner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, pink 0%, #2575fc 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            transition: background 0.5s ease;
            background-size: cover;
            background-position: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
        }

        header {
            grid-column: 1 / -1;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            color: palevioletred;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .date-display {
            font-size: 1.2rem;
            color: palevioletred;
        }

        .panel {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .todo-panel {
            display: flex;
            flex-direction: column;
        }

        .calendar-panel {
            display: flex;
            flex-direction: column;
        }

        .weekly-panel {
            grid-column: 2 / 3;
            display: flex;
            flex-direction: column;
        }

        h2 {
            color: palevioletred;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid pink;
        }

        .todo-input {
            display: flex;
            margin-bottom: 15px;
        }

        .todo-input input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px 0 0 8px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .todo-input input:focus {
            border-color: palevioletred;
        }

        .todo-input button {
            padding: 12px 20px;
            background: palevioletred;
            color: white;
            border: none;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .todo-input button:hover {
            background: pink;
        }

        .todo-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .todo-filters button {
            padding: 8px 15px;
            background: #e0e0e0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .todo-filters button.active {
            background: palevioletred;
            color: plum;
        }

        .todo-list {
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
        }

        .todo-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            background: plum;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .todo-item input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .todo-item .text {
            flex: 1;
            font-size: 1rem;
        }

        .todo-item.completed .text {
            text-decoration: line-through;
            color: palevioletred;
        }

        .todo-item .delete {
            color: #ff4757;
            cursor: pointer;
            font-size: 1.2rem;
            transition: transform 0.3s;
        }

        .todo-item .delete:hover {
            transform: scale(1.2);
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }

        .calendar-header {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .calendar-header button {
            background: palevioletred;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        .weekday {
            text-align: center;
            font-weight: bold;
            color: palevioletred;
            padding: 5px;
        }

        .calendar-day {
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .calendar-day:hover {
            background: #e0e0e0;
        }

        .calendar-day.current {
            background: palevioletred;
            color: white;
        }

        .calendar-day.has-tasks {
            position: relative;
        }

        .calendar-day.has-tasks::after {
            content: '';
            position: absolute;
            bottom: 3px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: #ff4757;
            border-radius: 50%;
        }

        .weekly-planner {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .week-day {
            background: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        .week-day-name {
            text-align: center;
            font-weight: bold;
            color: palevioletred;
            padding-bottom: 8px;
            margin-bottom: 8px;
            border-bottom: 1px solid #eee;
        }

        .week-day-tasks {
            min-height: 150px;
        }

        .week-day-tasks .todo-item {
            margin-bottom: 8px;
            font-size: 0.9rem;
            padding: 8px;
        }

        .stats {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            text-align: center;
            color: palevioletred;
            font-weight: bold;
        }

        .bg-selector {
            position: relative;
        }

        .bg-toggle {
            background: palevioletred;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .bg-options {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: none;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 350px;
            z-index: 100;
            margin-top: 10px;
        }

        .bg-options.show {
            display: grid;
        }

        .bg-option {
            height: 60px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s;
            background-size: cover;
            background-position: center;
        }

        .bg-option:hover {
            transform: scale(1.05);
        }

        .bg-upload {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .bg-upload-btn {
            background: palevioletred;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
        }

        .bg-upload-input {
            display: none;
        }

        .upload-preview {
            height: 100px;
            border-radius: 8px;
            background-size: cover;
            background-position: center;
            display: none;
            margin-top: 10px;
        }

        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .weekly-panel {
                grid-column: 1 / -1;
            }

            .bg-options {
                left: 0;
                right: auto;
                width: 100%;
            }
        }
    </style>
</head>
<body id="body">
    <div class="container">
        <header>
            <div>
                <h1><i class="fas fa-calendar-check"></i> Planner</h1>
                <div class="date-display" id="currentDate">Monday, January 1, 2025</div>
            </div>
            <div class="bg-selector">
                <button class="bg-toggle" id="bgToggle">
                    <i class="fas fa-image"></i> Change Background
                </button>
                <div class="bg-options" id="bgOptions">
                    <div class="bg-option" style="background-image: url('pexels-marcin-manka-2148441138-31734821.jpg');" data-value="beach"></div>
                    <div class="bg-option" style="background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);" data-value="gradient2"></div>
                    <div class="bg-option" style="background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);" data-value="gradient3"></div>
                    <div class="bg-option" style="background: linear-gradient(135deg, #fad0c4 0%, #fcb69f 100%);" data-value="gradient4"></div>
                    <div class="bg-option" style="background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);" data-value="gradient5"></div>
                    <div class="bg-option" style="background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);" data-value="gradient6"></div>

                    <div class="bg-option" style="background-image: url('pexels-markusspiske-6658167.jpg');" data-value="beach"></div>

                    
                    <div class="bg-upload">
                        <label for="bgUpload" class="bg-upload-btn">
                            <i class="fas fa-upload"></i> Upload Your Image
                        </label>
                        <input type="file" id="bgUpload" class="bg-upload-input" accept="image/*">
                        <div id="uploadPreview" class="upload-preview"></div>
                    </div>
                </div>
            </div>
        </header>

        <div class="panel todo-panel">
            <h2><i class="fas fa-tasks"></i> To-Do List</h2>
            <div class="todo-input">
                <input type="text" id="todoInput" placeholder="Add a new task...">
                <button id="addTodoBtn"><i class="fas fa-plus"></i> Add</button>
            </div>
            <div class="todo-filters">
                <button class="active" data-filter="all">All</button>
                <button data-filter="active">Active</button>
                <button data-filter="completed">Completed</button>
            </div>
            <div class="todo-list" id="todoList">
                <!-- To-do items will be added here -->
            </div>
            <div class="stats">
                <span id="taskCount">0 tasks remaining</span>
            </div>
        </div>

        <div class="panel calendar-panel">
            <h2><i class="fas fa-calendar-alt"></i> Calendar 2025-2026</h2>
            <div class="calendar-header">
                <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                <span id="currentMonth">January 2025</span>
                <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div class="calendar" id="calendar">
                <!-- Calendar days will be added here -->
            </div>
            <div class="stats">
                <span id="monthTasks">0 tasks this month</span>
            </div>
        </div>

        <div class="panel weekly-panel">
            <h2><i class="fas fa-calendar-week"></i> Weekly Planner</h2>
            <div class="weekly-planner" id="weeklyPlanner">
                <!-- Weekly planner days will be added here -->
            </div>
            <div class="stats">
                <span id="weekTasks">0 tasks this week</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Current date
            let currentDate = new Date();
            let currentMonth = currentDate.getMonth();
            let currentYear = currentDate.getFullYear();
            
            // To-do list functionality
            let todos = JSON.parse(localStorage.getItem('todos')) || [];
            let currentFilter = 'all';
            
            // Background settings
            const body = document.getElementById('body');
            const bgToggle = document.getElementById('bgToggle');
            const bgOptions = document.getElementById('bgOptions');
            const bgOptionElements = document.querySelectorAll('.bg-option');
            const bgUpload = document.getElementById('bgUpload');
            const uploadPreview = document.getElementById('uploadPreview');
            
            // Load saved background
            const savedBackground = localStorage.getItem('background');
            if (savedBackground) {
                body.style.background = savedBackground;
                body.style.backgroundSize = 'cover';
            }
            
            // DOM elements
            const todoInput = document.getElementById('todoInput');
            const addTodoBtn = document.getElementById('addTodoBtn');
            const todoList = document.getElementById('todoList');
            const taskCount = document.getElementById('taskCount');
            const filterButtons = document.querySelectorAll('.todo-filters button');
            const currentMonthElement = document.getElementById('currentMonth');
            const calendarElement = document.getElementById('calendar');
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            const currentDateElement = document.getElementById('currentDate');
            const weeklyPlannerElement = document.getElementById('weeklyPlanner');
            const monthTasksElement = document.getElementById('monthTasks');
            const weekTasksElement = document.getElementById('weekTasks');
            
            // Initialize date display
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            currentDateElement.textContent = currentDate.toLocaleDateString('en-US', options);
            
            // Initialize app
            renderTodos();
            generateCalendar(currentMonth, currentYear);
            generateWeeklyPlanner();
            updateTaskStats();
            
            // Event listeners
            addTodoBtn.addEventListener('click', addTodo);
            todoInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addTodo();
            });
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    currentFilter = this.getAttribute('data-filter');
                    renderTodos();
                });
            });
            
            prevMonthBtn.addEventListener('click', function() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                generateCalendar(currentMonth, currentYear);
            });
            
            nextMonthBtn.addEventListener('click', function() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                generateCalendar(currentMonth, currentYear);
            });
            
            // Background selector functionality
            bgToggle.addEventListener('click', function() {
                bgOptions.classList.toggle('show');
            });
            
            // Close background selector when clicking outside
            document.addEventListener('click', function(event) {
                if (!bgToggle.contains(event.target) && !bgOptions.contains(event.target)) {
                    bgOptions.classList.remove('show');
                }
            });
            
            bgOptionElements.forEach(option => {
                option.addEventListener('click', function() {
                    const bgValue = window.getComputedStyle(option).background;
                    body.style.background = bgValue;
                    body.style.backgroundSize = 'cover';
                    localStorage.setItem('background', bgValue);
                    bgOptions.classList.remove('show');
                });
            });
            
            // Handle image upload
            bgUpload.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const imageUrl = e.target.result;
                        uploadPreview.style.backgroundImage = `url(${imageUrl})`;
                        uploadPreview.style.display = 'block';
                        
                        // Set as background
                        body.style.background = `url(${imageUrl})`;
                        body.style.backgroundSize = 'cover';
                        body.style.backgroundPosition = 'center';
                        localStorage.setItem('background', `url(${imageUrl})`);
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Functions
            function addTodo() {
                const text = todoInput.value.trim();
                if (text !== '') {
                    const todo = {
                        id: Date.now(),
                        text: text,
                        completed: false,
                        date: new Date().toISOString().split('T')[0],
                        day: currentDate.getDate(),
                        month: currentDate.getMonth(),
                        year: currentDate.getFullYear()
                    };
                    
                    todos.push(todo);
                    saveTodos();
                    renderTodos();
                    generateCalendar(currentMonth, currentYear);
                    generateWeeklyPlanner();
                    updateTaskStats();
                    todoInput.value = '';
                }
            }
            
            function deleteTodo(id) {
                todos = todos.filter(todo => todo.id !== id);
                saveTodos();
                renderTodos();
                generateCalendar(currentMonth, currentYear);
                generateWeeklyPlanner();
                updateTaskStats();
            }
            
            function toggleComplete(id) {
                todos = todos.map(todo => {
                    if (todo.id === id) {
                        todo.completed = !todo.completed;
                    }
                    return todo;
                });
                saveTodos();
                renderTodos();
                generateCalendar(currentMonth, currentYear);
                generateWeeklyPlanner();
                updateTaskStats();
            }
            
            function saveTodos() {
                localStorage.setItem('todos', JSON.stringify(todos));
            }
            
            function renderTodos() {
                let filteredTodos = todos;
                
                if (currentFilter === 'active') {
                    filteredTodos = todos.filter(todo => !todo.completed);
                } else if (currentFilter === 'completed') {
                    filteredTodos = todos.filter(todo => todo.completed);
                }
                
                todoList.innerHTML = '';
                
                if (filteredTodos.length === 0) {
                    todoList.innerHTML = '<div class="no-tasks">No tasks found</div>';
                    return;
                }
                
                filteredTodos.forEach(todo => {
                    const todoElement = document.createElement('div');
                    todoElement.className = `todo-item ${todo.completed ? 'completed' : ''}`;
                    todoElement.innerHTML = `
                        <input type="checkbox" ${todo.completed ? 'checked' : ''}>
                        <span class="text">${todo.text}</span>
                        <span class="delete"><i class="fas fa-trash"></i></span>
                    `;
                    
                    todoElement.querySelector('input').addEventListener('change', () => toggleComplete(todo.id));
                    todoElement.querySelector('.delete').addEventListener('click', () => deleteTodo(todo.id));
                    
                    todoList.appendChild(todoElement);
                });
            }
            
            function generateCalendar(month, year) {
                // Update current month display
                const monthNames = ["January", "February", "March", "April", "May", "June",
                    "July", "August", "September", "October", "November", "December"
                ];
                currentMonthElement.textContent = `${monthNames[month]} ${year}`;
                
                // Clear previous calendar
                calendarElement.innerHTML = '';
                
                // Add weekday headers
                const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
                weekdays.forEach(day => {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'weekday';
                    dayElement.textContent = day;
                    calendarElement.appendChild(dayElement);
                });
                
                // Get first day of month and number of days
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                
                // Add empty cells for days before the first day of the month
                for (let i = 0; i < firstDay; i++) {
                    const emptyDay = document.createElement('div');
                    emptyDay.className = 'calendar-day empty';
                    calendarElement.appendChild(emptyDay);
                }
                
                // Add days of the month
                const today = new Date();
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = day;
                    
                    // Check if this day has tasks
                    const hasTasks = todos.some(todo => 
                        todo.day === day && 
                        todo.month === month && 
                        todo.year === year
                    );
                    
                    if (hasTasks) {
                        dayElement.classList.add('has-tasks');
                    }
                    
                    // Check if it's the current day
                    if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                        dayElement.classList.add('current');
                    }
                    
                    calendarElement.appendChild(dayElement);
                }
            }
            
            function generateWeeklyPlanner() {
                weeklyPlannerElement.innerHTML = '';
                
                const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                const today = new Date();
                const currentDay = today.getDay();
                
                // Calculate start of week (Sunday)
                const startOfWeek = new Date(today);
                startOfWeek.setDate(today.getDate() - currentDay);
                
                for (let i = 0; i < 7; i++) {
                    const day = new Date(startOfWeek);
                    day.setDate(startOfWeek.getDate() + i);
                    
                    const dayElement = document.createElement('div');
                    dayElement.className = 'week-day';
                    
                    const dayNameElement = document.createElement('div');
                    dayNameElement.className = 'week-day-name';
                    dayNameElement.textContent = daysOfWeek[i];
                    
                    const dayTasksElement = document.createElement('div');
                    dayTasksElement.className = 'week-day-tasks';
                    
                    // Get tasks for this day
                    const dayTasks = todos.filter(todo => {
                        const todoDate = new Date(todo.year, todo.month, todo.day);
                        return todoDate.toDateString() === day.toDateString();
                    });
                    
                    if (dayTasks.length > 0) {
                        dayTasks.forEach(task => {
                            const taskElement = document.createElement('div');
                            taskElement.className = `todo-item ${task.completed ? 'completed' : ''}`;
                            taskElement.innerHTML = `
                                <input type="checkbox" ${task.completed ? 'checked' : ''}>
                                <span class="text">${task.text}</span>
                            `;
                            
                            taskElement.querySelector('input').addEventListener('change', () => toggleComplete(task.id));
                            dayTasksElement.appendChild(taskElement);
                        });
                    }
                    
                    dayElement.appendChild(dayNameElement);
                    dayElement.appendChild(dayTasksElement);
                    weeklyPlannerElement.appendChild(dayElement);
                }
            }
            
            function updateTaskStats() {
                // Update task count
                const activeTasks = todos.filter(todo => !todo.completed).length;
                taskCount.textContent = `${activeTasks} task${activeTasks !== 1 ? 's' : ''} remaining`;
                
                // Update month tasks count
                const monthTasks = todos.filter(todo => 
                    todo.month === currentMonth && 
                    todo.year === currentYear
                ).length;
                monthTasksElement.textContent = `${monthTasks} task${monthTasks !== 1 ? 's' : ''} this month`;
                
                // Update week tasks count
                const today = new Date();
                const currentDay = today.getDay();
                const startOfWeek = new Date(today);
                startOfWeek.setDate(today.getDate() - currentDay);
                
                let weekTasks = 0;
                for (let i = 0; i < 7; i++) {
                    const day = new Date(startOfWeek);
                    day.setDate(startOfWeek.getDate() + i);
                    
                    const dayTasks = todos.filter(todo => {
                        const todoDate = new Date(todo.year, todo.month, todo.day);
                        return todoDate.toDateString() === day.toDateString();
                    });
                    
                    weekTasks += dayTasks.length;
                }
                
                weekTasksElement.textContent = `${weekTasks} task${weekTasks !== 1 ? 's' : ''} this week`;
            }
        });
    </script>
</body>
</html>